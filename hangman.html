<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Hangman</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <h1>Press Any Key To Get Started!</h1>
      <h3>Wins = <text id="wins">0</text></h3>
      <h3>Current Word = <span id="word"><strong></strong></span></h3>
      <h3>Letters Already Guessed = <span id="letters-guessed"><strong></strong></span></h3>
      <h3>Number of Guesses Remaining = <span id="guess-remaining"><strong>13</strong></span></h3>
    </div>

    <script>

    // Variables
    var myArray = ["broncos", "nuggets", "avalanche", "rockies", "buffaloes", "rams", "pioneers"];
    var word = document.getElementById('word');
    var guess = document.getElementById('letters-guessed');
    var guessRemaining = document.getElementById('guess-remaining');
    var wins = document.getElementById('wins');
    var winsCount = 0;
    var wordArray = [];
    var guessCount = 13;
    var missedGuessArray = [];
    var usedLetterArray = [];
    var randomWord = myArray[getRandomNumber()];
    console.log(randomWord);

    // Appending wordArray with each letter of randomWord
    appendWordArray(randomWord);

    // Displaying the contents of wordArray (a dash for each letter in randomWord)
    word.innerHTML = wordArray.join(" ");

    // Displaying the contents of guessArray (empty to start - no dashes)
    guess.innerHTML = missedGuessArray.join(" ");

    // Displaying the win total to start the game
    wins.innerHTML = 0;
    
    // Function to return a new word after the first game
    function getRandomWord() {
      var newWord = myArray[getRandomNumber()];
      return newWord;
      console.log(newWord);
    }

    // Function to append wordArray with a dash for every letter in randomWord. Takes in a string (randomWord)
    function appendWordArray(str) {
      for (i = 0; i < str.length; i++) {
        wordArray.push("_ ");
      }
    }

    // Function to get a random number to be used as the index to get a random word out of wordArray
    function getRandomNumber() {
      return Math.floor(Math.random() * myArray.length);
    }

    // Resets game
    function resetGame() {
      randomWord = getRandomWord();
          
      guessCount = 13;
      guessRemaining.innerHTML = guessCount;
      wordArray = [];
      missedGuessArray = [];
      usedLetterArray = [];
      appendWordArray(randomWord);
      console.log(randomWord);
      
      word.innerHTML = wordArray.join(" ");
      guess.innerHTML = missedGuessArray.join(" ");
    }
     

    document.onkeyup = function(event) {
  
      // If key selected hasn't been used
      if (!usedLetterArray.includes(event.key)) {

        // Append usedLetterArray with key selected
        usedLetterArray.push(event.key);
        
        // Decrease guessCount
        guessCount -= 1;

        // Display new guessCount
        guessRemaining.innerHTML = guessCount;

      } else {
        alert(`You already guessed '${event.key}'!`);
      }
        
      // Check if key selected equals each letter of randomWord
      for (i = 0; i < randomWord.length; i++) {

        if (event.key === randomWord[i]) {

          // If yes, change index value of wordArray from "_ " to key selected
          wordArray[i] = event.key;

          // Display updated wordArray
          word.innerHTML = wordArray.join(" ");

        }

      }
        
      // If randomWord doesn't include the key selected AND guessArray doesn't include the key selected
      if (!randomWord.includes(event.key) && !missedGuessArray.includes(event.key)) {
        
        // Add key selected to end of guessArray
        missedGuessArray.push(event.key);

        // Display updated guessArray
        guess.innerHTML = missedGuessArray.join(" ");
      
      } 

      // If wordArray (correct guesses) = randomWord
      if (wordArray.join("") === randomWord) {
        alert('you win!');

        winsCount += 1;
        document.getElementById('wins').innerHTML = winsCount;

        resetGame();
        
      }

      // If guesses remaining is less than 1
      if (Number(guessRemaining.innerHTML) < 1) {
        
        alert('you lose!');

        resetGame();

      }
      

    };

    </script>

  </body>
</html>